<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:b="http://bootsfaces.net/ui">

    <h:head>
        <title>My Profile</title>
        <!--        <script src="../Scripts/Bootstrap/js/bootstrap.js"></script>-->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js" />           
        <!--        <script src="../Scripts/Bootstrap/js/bootstrap.js" type="text/javascript"></script>
                <link href="../Scripts/Bootstrap/css/bootstrap.css" rel="stylesheet" type="text/css"/>-->
        <link href="../Scripts/Kwetter/css/kwetter.css" rel="stylesheet" type="text/css"/>
    </h:head>

    <h:body>
        <!--         NAVIGATION BAR -->
        <b:navBar brand="Kwetter" brandHref="#" inverse="true">
            <b:navbarLinks>
                <b:navLink value="Home" href="http://localhost:8080/Kwetter/faces/index.xhtml"></b:navLink>
                <b:navLink value="Startpage" href="http://localhost:8080/Kwetter/faces/User/startpage.xhtml"></b:navLink>
            </b:navbarLinks>
        </b:navBar>
        <!-- EmailAddress parameter  -->
        <f:metadata>
            <f:viewParam name="emailAddress" value="#{userPublicBean.emailAddress}"/>
        </f:metadata>
        <div class="container-fluid text-center">    
            <div class="row content">
                <div class="col-sm-2 sidenav">

                    <!-- PROFILE DETAILs  -->
                    <div class = "panel panel-default">
                        <div class = "panel-heading">
                            <h3 class = "panel-title">
                                Profile Details
                            </h3>
                        </div>
                        <div class = "panel-body" >
                            <div class="profileDetails">                    
                                <img src="#{userPublicBean.photoPath}" class="img-thumbnail" alt="Cinque Terre" width="304" height="236"/>
                                <p class="userBioProperty">Name</p>
                                <p>#{userPublicBean.name}</p>
                            </div>
                        </div>
                    </div>
                    <!-- USER DETAILS -->
                    <div class = "panel panel-default">
                        <div class = "panel-heading">
                            <h3 class = "panel-title">
                                User Details
                            </h3>
                        </div>
                        <div class = "panel-body" >
                            <div class="userBio">
                                <p class="userBioProperty">Bio</p>
                                <p>#{userPublicBean.userBio}</p>
                                <p class="userBioProperty">Location</p>
                                <p>#{userPublicBean.userLocation}</p>
                                <p class="userBioProperty">Website</p>
                                <p>#{userPublicBean.userWebsite}</p>
                            </div>
                        </div>
                    </div>
                </div>
                <form>
                    <div class="col-sm-8 text-left"> 
                        <div align="left;">
                            <h3>My Postings</h3>    
                        </div>                        
                        <h:form>
                            <p:dataTable var="post" value="#{userPublicBean.myPostings}" scrollRows="5" scrollable="true" liveScroll="true" scrollHeight="150">

                                <p:column headerText="Date" >
                                    <h:outputText value="#{post.date}" />
                                </p:column>

                                <p:column headerText="Content" >
                                    <h:outputText value="#{post.content}" />
                                </p:column>
                            </p:dataTable>                          
                        </h:form>
                    </div>
                </form>

            </div>
            <div class="col-sm-2 sidenav" style="float: right;">
                <!-- FOLLOWING -->
                <div class = "panel panel-default" style="height: 45%;">
                    <div class = "panel-heading">
                        <h3 class = "panel-title">
                            People i follow
                        </h3>
                    </div>
                    <div class = "panel-body">
                        <div class="userFollowing">
                            <ui:repeat value="#{userPublicBean.peopleIFollow}" var="user">
                                <h:graphicImage value="#{user.photoPath}" style="border: none; max-height: 10%; max-width: 10%;"/>

                                <b:navLink value="#{user.name}" href="http://localhost:8080/Kwetter/faces/Public/profilepage.xhtml?emailAddress=#{user.emailAddress}"></b:navLink>

                                <br></br>
                            </ui:repeat>  
                        </div>
                    </div>
                </div>
                <!-- FOLLOWERS -->
                <div class = "panel panel-default" style="height: 45%;">
                    <div class = "panel-heading">
                        <h3 class = "panel-title">
                            People that follow me
                        </h3>
                    </div>
                    <div class = "panel-body">
                        <div class="userFollowers">
                            <ui:repeat value="#{userPublicBean.peopleThatFollowMe}" var="user">
                                <h:graphicImage value="#{user.photoPath}" style="border: none; max-height: 10%; max-width: 10%;" />                                     
                                <b:navLink value="#{user.name}" href="http://localhost:8080/Kwetter/faces/Public/profilepage.xhtml?emailAddress=#{user.emailAddress}"></b:navLink>
                                <br></br>
                            </ui:repeat>                        
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="navbar navbar-fixed-bottom">
            <footer class="container-fluid text-center">
                <p>Kwetter 2017</p>
            </footer>
        </div>

    </h:body>

</html>

